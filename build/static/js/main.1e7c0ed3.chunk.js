(this["webpackJsonpfollow-only"]=this["webpackJsonpfollow-only"]||[]).push([[0],{21:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var s=n(2),r=n.n(s),a=n(12),c=n.n(a),o=n(3),u=n(4),i=n(8),b=n(7),l=n(6),h=n(1),d=n.n(h),p=n(5),j=n(0);var f=function(e){return void 0!==e.subsHandler("","getCurrentSubs")[e.authorId]?Object(j.jsxs)("div",{children:[Object(j.jsx)("h3",{children:e.author}),Object(j.jsxs)("p",{children:["Subs : ",e.subCount]}),Object(j.jsx)("p",{children:e.description}),Object(j.jsx)("button",{onClick:function(){e.subsHandler({authorId:e.authorId},"deleteSub")},children:"Unsubscribe"})]},e.authorId):Object(j.jsxs)("div",{children:[Object(j.jsx)("h3",{children:e.author}),Object(j.jsxs)("p",{children:["Subs : ",e.subCount]}),Object(j.jsx)("p",{children:e.description}),Object(j.jsx)("button",{onClick:function(){e.subsHandler({author:e.author,authorId:e.authorId,description:e.description},"addSubs")},children:"Subscribe"})]},e.authorId)},v=n(13),x=function(){function e(){Object(o.a)(this,e)}return Object(u.a)(e,[{key:"getRandomInstance",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t,n,s,r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.invidious.io/instances.json?sort_by=health");case 2:return e.next=4,e.sent.json();case 4:t=e.sent,n=[],s=Object(v.a)(t);try{for(s.s();!(r=s.n()).done;)null!==(a=r.value)[1].monitor&&n.push(a[0])}catch(c){s.e(c)}finally{s.f()}return e.abrupt("return",n[Math.floor(Math.random()*n.length)]);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),O=function(e){Object(b.a)(n,e);var t=Object(l.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).state={subs:[]},s}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t,n,s,r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.subsHandler("","getCurrentSubs"),n=[],e.t0=d.a.keys(t);case 3:if((e.t1=e.t0()).done){e.next=19;break}s=e.t1.value,r=new x,a=!0;case 7:if(!a){e.next=16;break}return e.prev=8,e.delegateYield(d.a.mark((function e(){var t,c,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new AbortController,setTimeout((function(){return t.abort()}),3e3),e.next=4,r.getRandomInstance();case 4:return c=e.sent,e.next=7,fetch("https://".concat(c,"/api/v1/channels/").concat(s),{signal:t.signal});case 7:return e.next=9,e.sent.json();case 9:o=e.sent,n.push(o),a=!1;case 12:case"end":return e.stop()}}),e)}))(),"t2",10);case 10:e.next=14;break;case 12:e.prev=12,e.t3=e.catch(8);case 14:e.next=7;break;case 16:this.setState({subs:n}),e.next=3;break;case 19:case"end":return e.stop()}}),e,this,[[8,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return console.log(this.state.subs),Object(j.jsx)("div",{className:"contentArea",children:this.state.subs.map((function(t){return Object(j.jsx)(f,{author:t.author,subCount:t.subCount,authorId:t.authorId,description:t.description,subsHandler:e.props.subsHandler})}))})}}]),n}(r.a.Component),m=function(e){Object(b.a)(n,e);var t=Object(l.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).state={input:"",searchResults:[]},s.search=s.search.bind(Object(i.a)(s)),s}return Object(u.a)(n,[{key:"search",value:function(){var e=Object(p.a)(d.a.mark((function e(t){var n,s,r=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=new x,s=!0;case 3:if(!s){e.next=12;break}return e.prev=4,e.delegateYield(d.a.mark((function e(){var t,a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getRandomInstance();case 2:return t=e.sent,a=new AbortController,setTimeout((function(){return a.abort()}),3e3),e.next=7,fetch("https://".concat(t,"/api/v1/search?q=").concat(r.state.input,"&type=channel&sort_by=relevance"),{signal:a.signal});case 7:return e.next=9,e.sent.json();case 9:c=e.sent,r.setState({searchResults:c.slice(0,4)}),s=!1;case 12:case"end":return e.stop()}}),e)}))(),"t0",6);case 6:e.next=10;break;case 8:e.prev=8,e.t1=e.catch(4);case 10:e.next=3;break;case 12:case"end":return e.stop()}}),e,null,[[4,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(j.jsxs)("div",{className:"contentArea",children:[Object(j.jsxs)("form",{onSubmit:this.search,children:[Object(j.jsx)("input",{placeholder:"Search channel...",onChange:function(t){e.setState({input:t.target.value})}}),Object(j.jsx)("input",{type:"submit",value:"Search"})]}),this.state.searchResults.map((function(t){return Object(j.jsx)(f,{author:t.author,subCount:t.subCount,authorId:t.authorId,description:t.description,subsHandler:e.props.subsHandler})}))]})}}]),n}(r.a.Component),C=n(14),k=function(e){Object(b.a)(n,e);var t=Object(l.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).state={subsLatestContent:[]},s}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=Object(p.a)(d.a.mark((function e(){var t,n,s,r,a=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.subsHandler("","getCurrentSubs"),e.t0=d.a.keys(t);case 2:if((e.t1=e.t0()).done){e.next=17;break}n=e.t1.value,s=new x,r=!0;case 6:if(!r){e.next=15;break}return e.prev=7,e.delegateYield(d.a.mark((function e(){var t,c,o,u,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new AbortController,setTimeout((function(){return t.abort()}),2e3),e.next=4,s.getRandomInstance();case 4:return c=e.sent,e.next=7,fetch("https://".concat(c,"/api/v1/channels/latest/").concat(n),{signal:t.signal});case 7:return e.next=9,e.sent.json();case 9:o=e.sent,(u=a.state.subsLatestContent).push.apply(u,Object(C.a)(o.slice(0,4))),i=u.sort((function(e,t){return e.published===t.published?0:e.published>t.published?1:-1})).reverse(),a.setState({subsLatestContent:i}),r=!1;case 15:case"end":return e.stop()}}),e)}))(),"t2",9);case 9:e.next=13;break;case 11:e.prev=11,e.t3=e.catch(7);case 13:e.next=6;break;case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[7,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(j.jsx)("div",{className:"contentArea",children:this.state.subsLatestContent.map((function(e){return Object(j.jsx)("div",{children:Object(j.jsxs)("a",{href:"https://www.youtube-nocookie.com/embed/"+e.videoId,target:"_blank",rel:"noreferrer",children:[e.title," ~ ",e.author]})},e.videoId)}))})}}]),n}(r.a.Component),w=(n(21),function(e){Object(b.a)(n,e);var t=Object(l.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).state={subs:{},navigateTo:{searchComponent:!1,viewSubsContent:!1,subsComponent:!1}},s.subsHandler=s.subsHandler.bind(Object(i.a)(s)),s}return Object(u.a)(n,[{key:"subsHandler",value:function(e,t){var n=this.state.subs;if(void 0===n[e.authorId]&&"addSubs"===t)n[e.authorId]={author:e.author,description:e.description},this.setState({subs:n}),console.log(this.state.subs);else if("deleteSub"===t)delete n[e.authorId],this.setState({subs:n}),console.log(this.state.subs);else if("getCurrentSubs"===t)return n}},{key:"render",value:function(){var e=this;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{id:"titleSection",children:[Object(j.jsxs)("h1",{children:[Object(j.jsx)("span",{id:"followOnly",children:"FollowOnly"})," for YouTube"]}),Object(j.jsx)("p",{children:"Frontend Client for watching content made by channels you follow and nothing else."})]}),Object(j.jsxs)("div",{className:"wrapper",children:[Object(j.jsx)("button",{className:"navButton",onClick:function(){e.setState({navigateTo:{searchComponent:!1,viewSubsContent:!0,subsComponent:!1}})},children:"View Feed"}),Object(j.jsx)("button",{className:"navButton",onClick:function(){e.setState({navigateTo:{searchComponent:!0,viewSubsContent:!1,subsComponent:!1}})},children:"Search Channels"}),Object(j.jsx)("button",{className:"navButton",onClick:function(){e.setState({navigateTo:{searchComponent:!1,viewSubsContent:!1,subsComponent:!0}})},children:"Subbed Channels"})]}),function(){if(!0===e.state.navigateTo.searchComponent)return Object(j.jsx)(m,{subsHandler:e.subsHandler})}(),function(){if(!0===e.state.navigateTo.viewSubsContent)return Object(j.jsx)(k,{subsHandler:e.subsHandler})}(),function(){if(!0===e.state.navigateTo.subsComponent)return Object(j.jsx)(O,{subsHandler:e.subsHandler})}()]})}}]),n}(r.a.Component));c.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(w,{})}),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.1e7c0ed3.chunk.js.map